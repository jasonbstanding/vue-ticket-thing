(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["list"],{"06f4":function(t,i,e){"use strict";e("253f")},"253f":function(t,i,e){},"79ac":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("h1",[t._v("Ticket Listing")]),this.loading?e("semipolar-spinner",{staticClass:"spinner",attrs:{"animation-duration":2e3,size:255,color:"orange"}}):e("div",[e("div",{staticClass:"filterlist"},[this.filters.length>0?e("div",{staticClass:"clear"},[e("div",{staticClass:"clear",on:{click:t.clearFilters}},[t._v("Clear")])]):t._e(),t._l(this.filters,(function(i){return e("div",{key:i.type},[e("div",[t._v(t._s(i.type)+" : "+t._s(i.filterText))])])}))],2),e("div",{staticClass:"ticketlist"},t._l(t.filteredTickets,(function(i){return e("TicketSummary",{key:i.id,attrs:{ticket:i},on:{filterList:t.filterList,showModal:t.modalShow}})})),1),e("transition",{attrs:{name:"modal"}},[t.showModal?e("Modal",{attrs:{ticket:t.selectedTicket},on:{modalClose:t.modalClose}}):t._e()],1)],1)],1)},c=[],a=e("5530"),n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"ticket -shadow"},[t._l(t.ticket.gigtype,(function(i){return e("div",{key:i.term_id,staticClass:"gigtype"},[e("div",{on:{click:function(e){return t.filterList("gigtype",i.term_id,i.name)}}},[t._v(" "+t._s(i.name)+" ")])])})),e("div",{staticClass:"ticketbody",style:{backgroundImage:"url("+t.ticket.image_sml+")"}},[e("div",{staticClass:"overlay"},[e("div",{staticClass:"date",on:{click:function(i){t.filterList("date",parseInt(t.ticket.date),parseInt(t.ticket.date))}}},[t._v(" "+t._s(t.ticket.date)+" ")]),e("div",{staticClass:"title"},[e("button",{attrs:{id:"show-modal"},on:{click:function(i){return t.$emit("showModal",t.ticket)}}},[t._v(t._s(t.ticket.title))])]),t.ifArtist?e("div",{key:t.ticket.artist[0].term_id,staticClass:"artist"},[e("div",{on:{click:function(i){return t.filterList("artist",t.ticket.artist[0].term_id,t.ticket.artist[0].name)}}},[t._v(" "+t._s(t.ticket.artist[0].name)+" ")])]):t._e(),e("div",{staticClass:"details"},[e("span",{staticClass:"price"},[t._v(t._s(t.ticketPrice))]),t.ifVenue?e("span",{key:t.ticket.venue[0].term_id,staticClass:"venue"},[e("span",{on:{click:function(i){return t.filterList("venue",t.ticket.venue[0].term_id,t.ticket.venue[0].name)}}},[t._v(" "+t._s(t.ticket.venue[0].name))])]):t._e()])])])],2)},r=[],l={props:{ticket:Object},methods:{filterList:function(t,i,e){this.$emit("filterList",{type:t,filterVal:i,filterText:e})}},computed:{ticketPrice:function(){return this.ticket.price>0?"£"+this.ticket.price:"Free"},ifArtist:function(){return!!this.ticket.artist},ifVenue:function(){return!!this.ticket.venue}}},o=l,u=(e("8b1b"),e("2877")),d=Object(u["a"])(o,n,r,!1,null,"38cb1254",null),f=d.exports,k=e("2f62"),h=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("button",{staticClass:"modal-default-button",on:{click:function(i){return t.$emit("modalClose")}}},[t._v(" X ")]),t._t("header",(function(){return[e("div",[t._v(t._s(t.ticketHeading))]),t.ticketVenue?e("div",[t._v(t._s(t.ticketVenue))]):t._e()]}))],2),e("div",{staticClass:"modal-body"},[t._t("body",(function(){return[t.gigTitle?e("div",{staticClass:"gigtitle"},[t._v(t._s(t.gigTitle))]):t._e(),t.ticket.image_lg?e("div",[e("img",{staticClass:"ticketimage",attrs:{src:t.ticket.image_lg}})]):t._e()]}))],2),e("div",{staticClass:"modal-footer"},[t._t("footer")],2)])])])},v=[],m=(e("b0c0"),e("a15b"),{props:{ticket:Object},computed:{ticketArtist:function(){var t;return(null===(t=this.ticket.artist)||void 0===t?void 0:t.count)>0?this.ticket.artist[0].name:""},ticketHeading:function(){var t=[];return console.log(this.ticket),this.ticket.date&&t.push(this.ticket.date),null!=this.ticket.artist&&t.push(this.ticket.artist[0].name),this.ticket.price&&t.push("£"+this.ticket.price),t.join(" - ")},ticketVenue:function(){return null!=this.ticket.venue?this.ticket.venue[0].name:null},gigTitle:function(){return this.ticket.artist&&this.ticket.title==this.ticket.artist[0].name?null:this.ticket.title}}}),_=m,p=(e("06f4"),Object(u["a"])(_,h,v,!1,null,"acafadf4",null)),g=p.exports,b=e("4583"),C={name:"ticket-list",components:{TicketSummary:f,SemipolarSpinner:b["a"],Modal:g},data:function(){return{filters:[],showModal:!1,selectedTicket:{},loadingState:!0}},created:function(){var t=this;this.getTicketsTotal?this.loadingState=!1:this.$store.dispatch("fetchTicketData").then((function(){t.loadingState=!1})).catch((function(t){console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(k["c"])(["tickets","ticket","loading","filteredTickets"])),Object(k["b"])(["getTicketsTotal","getTicketsByGigType"])),{},{loading:function(){return this.loadingState}}),methods:{filterList:function(t){this.filters.push(t),this.$store.dispatch("setFilteredTicketList",t)},clearFilters:function(){this.$store.dispatch("clearFilters"),this.filters=[]},modalShow:function(t){this.selectedTicket=t,this.showModal=!0},modalClose:function(){this.showModal=!1}}},y=C,T=(e("9f13"),Object(u["a"])(y,s,c,!1,null,"83a6a614",null));i["default"]=T.exports},"8b1b":function(t,i,e){"use strict";e("ce48")},"9f13":function(t,i,e){"use strict";e("c68f")},a15b:function(t,i,e){"use strict";var s=e("23e7"),c=e("e330"),a=e("44ad"),n=e("fc6a"),r=e("a640"),l=c([].join),o=a!=Object,u=r("join",",");s({target:"Array",proto:!0,forced:o||!u},{join:function(t){return l(n(this),void 0===t?",":t)}})},c68f:function(t,i,e){},ce48:function(t,i,e){}}]);
//# sourceMappingURL=list.1b2e40f0.js.map