(function(){"use strict";var e={3428:function(e,t,i){var n=i(5130),r=i(6768);const l={id:"app"},o={key:0,class:"spinner-container"},s={key:1};function a(e,t,i,n,a,c){const u=(0,r.g2)("FiltersComponent"),g=(0,r.g2)("BreadcrumbsComponent"),d=(0,r.g2)("Spinner"),p=(0,r.g2)("GigList"),f=(0,r.g2)("ModalComponent");return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("header",null,[(0,r.bF)(u,{filters:a.filters,onClearAll:c.clearAllFilters},null,8,["filters","onClearAll"]),(0,r.bF)(g,{filters:a.filters,onRemoveFilter:c.removeFilter},null,8,["filters","onRemoveFilter"])]),a.loading?((0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(d)])):((0,r.uX)(),(0,r.CE)("div",s,[(0,r.bF)(p,{gigs:c.filteredGigs,onSelectGig:c.selectGig,onApplyFilter:c.applyFilter},null,8,["gigs","onSelectGig","onApplyFilter"]),a.selectedGig?((0,r.uX)(),(0,r.Wv)(f,{key:0,gig:a.selectedGig,onClose:t[0]||(t[0]=e=>a.selectedGig=null)},null,8,["gig"])):(0,r.Q3)("",!0)]))])}var c=i(8355);const u={class:"filters"};function g(e,t,i,n,l,o){return(0,r.uX)(),(0,r.CE)("div",u,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("clear-all"))},"Clear All")])}var d={name:"FiltersComponent",props:{filters:Object}},p=i(1241);const f=(0,p.A)(d,[["render",g],["__scopeId","data-v-75a636ae"]]);var v=f,m=i(4232);const y={class:"breadcrumbs"},k=["onClick"];function h(e,t,i,n,l,o){return(0,r.uX)(),(0,r.CE)("div",y,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.activeFilters,((t,i)=>((0,r.uX)(),(0,r.CE)("span",{key:i},[(0,r.eW)((0,m.v_)(t.key)+": "+(0,m.v_)(t.value)+" ",1),(0,r.Lk)("button",{onClick:i=>e.$emit("remove-filter",t.key)},"x",8,k)])))),128))])}var b={name:"BreadcrumbsComponent",props:{filters:{type:Object,required:!0}},computed:{activeFilters(){return Object.entries(this.filters).filter((([,e])=>e)).map((([e,t])=>({key:e,value:t})))}}};const C=(0,p.A)(b,[["render",h],["__scopeId","data-v-87f1300a"]]);var G=C;const _={class:"sort-options"},F={class:"grid-container"};function A(e,t,i,n,l,o){const s=(0,r.g2)("GigBox");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",_,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>n.sort("artist","asc"))},"Sort Artist Asc"),(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>n.sort("artist","desc"))},"Sort Artist Desc"),(0,r.Lk)("button",{onClick:t[2]||(t[2]=e=>n.sort("date","asc"))},"Sort Date Asc"),(0,r.Lk)("button",{onClick:t[3]||(t[3]=e=>n.sort("date","desc"))},"Sort Date Desc")]),(0,r.Lk)("div",F,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.sortedGigs,(i=>((0,r.uX)(),(0,r.Wv)(s,{key:i.id,gig:i,onFilter:n.applyFilter,onSelectGig:t[4]||(t[4]=t=>e.$emit("select-gig",t))},null,8,["gig","onFilter"])))),128))])])}var L=i(144);const O={class:"gig-box"},E=["src"];function j(e,t,i,n,l,o){return(0,r.uX)(),(0,r.CE)("div",O,[(0,r.Lk)("div",{class:"gigtype",onClick:t[0]||(t[0]=e=>o.filterBy("gigtype"))},(0,m.v_)(i.gig.gigtype[0]?.name),1),(0,r.Lk)("img",{src:i.gig.image_sml,alt:"Gig Image",onClick:t[1]||(t[1]=e=>o.selectGig(i.gig))},null,8,E),(0,r.Lk)("h2",{onClick:t[2]||(t[2]=e=>o.selectGig(i.gig))},(0,m.v_)(i.gig.title),1),(0,r.Lk)("p",{onClick:t[3]||(t[3]=e=>o.filterBy("date"))},(0,m.v_)(i.gig.date),1),(0,r.Lk)("p",null,(0,m.v_)(i.gig.price>0?`£${i.gig.price}`:"Free"),1),i.gig.artist?((0,r.uX)(),(0,r.CE)("p",{key:0,onClick:t[4]||(t[4]=e=>o.filterBy("artist")),class:"artist"},(0,m.v_)(i.gig.artist[0]?.name),1)):(0,r.Q3)("",!0),i.gig.venue?((0,r.uX)(),(0,r.CE)("p",{key:1,onClick:t[5]||(t[5]=e=>o.filterBy("venue"))},(0,m.v_)(i.gig.venue[0]?.name),1)):(0,r.Q3)("",!0)])}var X={name:"GigBox",props:{gig:{type:Object,required:!0}},methods:{showDetails(){this.$emit("click")},filterBy(e){const t="date"===e?this.gig.date.split("-")[0]:this.gig[e][0]?.name;this.$emit("filter",{type:e,value:t})},selectGig(e){this.$emit("select-gig",e)}}};const S=(0,p.A)(X,[["render",j],["__scopeId","data-v-27f8479c"]]);var w=S,B={name:"GigList",components:{GigBox:w},props:{gigs:{type:Array,required:!0}},setup(e,{emit:t}){const i=(0,L.KR)(null),n=(0,L.KR)(null),l=(0,r.EW)((()=>i.value?[...e.gigs].sort(((e,t)=>{let r=e[i.value]?.[0]?.name||"",l=t[i.value]?.[0]?.name||"";return"date"===i.value&&(r=e.date,l=t.date),"asc"===n.value?r.localeCompare(l):l.localeCompare(r)})):e.gigs)),o=(e,t)=>{i.value=e,n.value=t},s=e=>{t("apply-filter",e)};return{sortedGigs:l,sort:o,applyFilter:s}}};const x=(0,p.A)(B,[["render",A],["__scopeId","data-v-8e28b406"]]);var I=x;const $={class:"modal-content"},K=["src"];function M(e,t,i,l,o,s){return(0,r.uX)(),(0,r.CE)("div",{class:"modal-backdrop",onClick:t[1]||(t[1]=(0,n.D$)(((...e)=>s.close&&s.close(...e)),["self"]))},[(0,r.Lk)("div",$,[(0,r.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>s.close&&s.close(...e))},"×"),(0,r.Lk)("img",{src:i.gig.image_lg,alt:"Gig Image"},null,8,K)])])}var D={name:"GigModal",props:{gig:{type:Object,required:!0}},methods:{close(){this.$emit("close")}}};const W=(0,p.A)(D,[["render",M],["__scopeId","data-v-1563efa6"]]);var R=W,q=i(6628),P={__name:"SpinnerComponent",setup(e){return(e,t)=>((0,r.uX)(),(0,r.Wv)((0,L.R1)(q.M),{"animation-duration":2e3,size:65,color:"#ff1d5e"}))}};const T=P;var Q=T,z={name:"App",components:{FiltersComponent:v,BreadcrumbsComponent:G,GigList:I,ModalComponent:R,Spinner:Q},data(){return{gigs:[],filters:{artist:null,venue:null,gigtype:null,date:null},selectedGig:null,loading:!1}},computed:{filteredGigs(){let e=this.gigs;for(const[t,i]of Object.entries(this.filters))i&&(e=e.filter((e=>"date"===t?e.date.startsWith(i):!!Array.isArray(e[t])&&e[t].some((e=>e.name===i)))));return e}},methods:{async fetchGigs(){this.loading=!0;try{const e=await c.A.get("https://jasonbstanding.com/wp-json/jbs/v2/tickets");this.gigs=e.data}catch(e){console.error("Error fetching gigs data:",e)}finally{this.loading=!1}},clearAllFilters(){this.filters={artist:null,venue:null,gigtype:null,date:null}},removeFilter(e){this.filters[e]=null},applyFilter(e){this.filters[e.type]=e.value},selectGig(e){this.selectedGig=e}},created(){this.fetchGigs()}};const J=(0,p.A)(z,[["render",a]]);var V=J,Z=i(1387);const H=[{path:"/",name:"GigList",component:I}],N=(0,Z.aE)({history:(0,Z.LA)("/"),routes:H});var U=N,Y=i(758);(0,n.Ef)(V).use(U).use(Y.Ay,{config:{id:"G-7KV1ZJGKK1"}}).mount("#app")}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,i),l.exports}i.m=e,function(){var e=[];i.O=function(t,n,r,l){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],l=e[u][2];for(var s=!0,a=0;a<n.length;a++)(!1&l||o>=l)&&Object.keys(i.O).every((function(e){return i.O[e](n[a])}))?n.splice(a--,1):(s=!1,l<o&&(o=l));if(s){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,r,l]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,l,o=n[0],s=n[1],a=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(a)var u=a(i)}for(t&&t(n);c<o.length;c++)l=o[c],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(u)},n=self["webpackChunkticket_thing"]=self["webpackChunkticket_thing"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],(function(){return i(3428)}));n=i.O(n)})();
//# sourceMappingURL=app.c35d0d7c.js.map