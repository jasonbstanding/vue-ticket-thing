(function(){"use strict";var e={4534:function(e,t,r){var n=r(5130),s=r(6768);const i={id:"app"},o={key:0,class:"spinner-container"},l={key:1};function a(e,t,r,n,a,u){const c=(0,s.g2)("Spinner"),d=(0,s.g2)("MenusComponent"),g=(0,s.g2)("FiltersComponent"),p=(0,s.g2)("BreadcrumbsComponent"),v=(0,s.g2)("GigList"),f=(0,s.g2)("ModalComponent");return(0,s.uX)(),(0,s.CE)("div",i,[n.loading?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(c)])):((0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("header",null,[(0,s.bF)(d,{artists:n.artistCounts,venues:n.venueCounts,years:n.yearCounts,onFilter:n.applyFilter},null,8,["artists","venues","years","onFilter"]),(0,s.bF)(g,{filters:n.filters,onClearAll:n.clearAllFilters},null,8,["filters","onClearAll"]),(0,s.bF)(p,{filters:n.filters,onRemoveFilter:n.removeFilter},null,8,["filters","onRemoveFilter"])]),(0,s.bF)(v,{gigs:n.filteredGigs,onSelectGig:n.selectGig,onApplyFilter:n.applyFilter},null,8,["gigs","onSelectGig","onApplyFilter"]),n.selectedGig?((0,s.uX)(),(0,s.Wv)(f,{key:0,gig:n.selectedGig,onClose:t[0]||(t[0]=e=>n.selectedGig=null)},null,8,["gig"])):(0,s.Q3)("",!0)]))])}r(4114);var u=r(144),c=r(1387),d=r(8355);const g={class:"filters"};function p(e,t,r,n,i,o){return(0,s.uX)(),(0,s.CE)("div",g,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("clear-all"))},"Clear All")])}var v={name:"FiltersComponent",props:{filters:Object}},f=r(1241);const m=(0,f.A)(v,[["render",p],["__scopeId","data-v-75a636ae"]]);var k=m,y=r(4232);const C=e=>((0,s.Qi)("data-v-07a65398"),e=e(),(0,s.jt)(),e),b=C((()=>(0,s.Lk)("div",{class:"titletext"},[(0,s.eW)(" The Ticket Thing (powered by "),(0,s.Lk)("a",{href:"https://www.jasonbstanding.com"},"jasonbstanding.com"),(0,s.eW)(") ")],-1)));function h(e,t,r,n,i,o){const l=(0,s.g2)("CDropdownToggle"),a=(0,s.g2)("CDropdownItem"),u=(0,s.g2)("CDropdownMenu"),c=(0,s.g2)("CDropdown");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("Artists")])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.sortedArtists,((e,t)=>((0,s.uX)(),(0,s.Wv)(a,{key:t,onClick:e=>o.filterBy("artist",t)},{default:(0,s.k6)((()=>[(0,s.eW)((0,y.v_)(t)+": "+(0,y.v_)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("Venues")])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.sortedVenues,((e,t)=>((0,s.uX)(),(0,s.Wv)(a,{key:t,onClick:e=>o.filterBy("venue",t)},{default:(0,s.k6)((()=>[(0,s.eW)((0,y.v_)(t)+": "+(0,y.v_)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("Years")])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.sortedYears,((e,t)=>((0,s.uX)(),(0,s.Wv)(a,{key:t,onClick:e=>o.filterBy("date",t)},{default:(0,s.k6)((()=>[(0,s.eW)((0,y.v_)(t)+": "+(0,y.v_)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("Sort Lists")])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.bF)(a,{onClick:t[0]||(t[0]=e=>o.setSort("asc"))},{default:(0,s.k6)((()=>[(0,s.eW)("A to Z")])),_:1}),(0,s.bF)(a,{onClick:t[1]||(t[1]=e=>o.setSort("desc"))},{default:(0,s.k6)((()=>[(0,s.eW)("Z to A")])),_:1}),(0,s.bF)(a,{onClick:t[2]||(t[2]=e=>o.setSort("freq"))},{default:(0,s.k6)((()=>[(0,s.eW)("Frequency desc.")])),_:1})])),_:1})])),_:1}),b],64)}var _=r(7694),F={name:"MenusComponent",components:{CDropdown:_.ji,CDropdownItem:_.kd,CDropdownToggle:_.VH,CDropdownMenu:_.QR},props:{artists:Object,venues:Object,years:Object},data(){return{sortName:"freq"}},computed:{sortedArtists(){let e={};return e="asc"==this.sortName||"desc"==this.sortName?this.asort(this.artists,this.sortName):this.sort2d(this.artists),e},sortedVenues(){let e={};return e="asc"==this.sortName||"desc"==this.sortName?this.asort(this.venues,this.sortName):this.sort2d(this.venues),e},sortedYears(){let e={};return e="asc"==this.sortName||"desc"==this.sortName?this.asort(this.years,this.sortName):this.sort2d(this.years),e}},methods:{filterBy(e,t){this.$emit("filter",{type:e,value:t})},setSort(e){this.sortName="asc"==e||"desc"==e?e:"freq"},sort2d(e){const t=Object.entries(e);return t.sort((([e,t],[r,n])=>t===n?e.localeCompare(r):n-t)),Object.fromEntries(t)},asort(e,t){const r=Object.entries(e);return r.sort((([e],[t])=>e.localeCompare(t))),"desc"==t&&r.sort().reverse(),Object.fromEntries(r)}}};const A=(0,f.A)(F,[["render",h],["__scopeId","data-v-07a65398"]]);var j=A;const G={class:"breadcrumbs"},E=["onClick"];function O(e,t,r,n,i,o){return(0,s.uX)(),(0,s.CE)("div",G,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.activeFilters,((t,r)=>((0,s.uX)(),(0,s.CE)("span",{key:r},[(0,s.eW)((0,y.v_)(t.key)+": "+(0,y.v_)(t.value)+" ",1),(0,s.Lk)("button",{onClick:r=>e.$emit("remove-filter",t.key)},"x",8,E)])))),128))])}var L={name:"BreadcrumbsComponent",props:{filters:{type:Object,required:!0}},computed:{activeFilters(){return Object.entries(this.filters).filter((([,e])=>e)).map((([e,t])=>({key:e,value:t})))}}};const w=(0,f.A)(L,[["render",O],["__scopeId","data-v-87f1300a"]]);var X=w;const W={class:"sort-options"},S={class:"grid-container"};function K(e,t,r,n,i,o){const l=(0,s.g2)("GigBox");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",W,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>n.sort("artist","asc"))},"Sort Artist Asc"),(0,s.Lk)("button",{onClick:t[1]||(t[1]=e=>n.sort("artist","desc"))},"Sort Artist Desc"),(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>n.sort("date","asc"))},"Sort Date Asc"),(0,s.Lk)("button",{onClick:t[3]||(t[3]=e=>n.sort("date","desc"))},"Sort Date Desc")]),(0,s.Lk)("div",S,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.sortedGigs,(r=>((0,s.uX)(),(0,s.Wv)(l,{key:r.id,gig:r,onFilter:n.applyFilter,onSelectGig:t[4]||(t[4]=t=>e.$emit("select-gig",t))},null,8,["gig","onFilter"])))),128))])])}const B={class:"gig-box"},I=["src"];function D(e,t,r,n,i,o){return(0,s.uX)(),(0,s.CE)("div",B,[(0,s.Lk)("div",{class:"gigtype",onClick:t[0]||(t[0]=e=>o.filterBy("gigtype"))},(0,y.v_)(r.gig.gigtype[0]?.name),1),(0,s.Lk)("img",{src:r.gig.image_sml,alt:"Gig Image",onClick:t[1]||(t[1]=e=>o.selectGig(r.gig))},null,8,I),(0,s.Lk)("h2",{onClick:t[2]||(t[2]=e=>o.selectGig(r.gig))},(0,y.v_)(r.gig.title),1),(0,s.Lk)("p",{onClick:t[3]||(t[3]=e=>o.filterBy("date"))},(0,y.v_)(r.gig.date),1),(0,s.Lk)("p",null,(0,y.v_)(r.gig.price>0?`£${r.gig.price}`:"Free"),1),r.gig.artist?((0,s.uX)(),(0,s.CE)("p",{key:0,onClick:t[4]||(t[4]=e=>o.filterBy("artist")),class:"artist"},(0,y.v_)(r.gig.artist[0]?.name),1)):(0,s.Q3)("",!0),r.gig.venue?((0,s.uX)(),(0,s.CE)("p",{key:1,onClick:t[5]||(t[5]=e=>o.filterBy("venue"))},(0,y.v_)(r.gig.venue[0]?.name),1)):(0,s.Q3)("",!0)])}var R={name:"GigBox",props:{gig:{type:Object,required:!0}},methods:{showDetails(){this.$emit("click")},filterBy(e){const t="date"===e?this.gig.date.split("-")[0]:this.gig[e][0]?.name;this.$emit("filter",{type:e,value:t})},selectGig(e){this.$emit("select-gig",e)}}};const q=(0,f.A)(R,[["render",D],["__scopeId","data-v-27f8479c"]]);var M=q,x={name:"GigList",components:{GigBox:M},props:{gigs:{type:Array,required:!0}},setup(e,{emit:t}){const r=(0,u.KR)(null),n=(0,u.KR)(null),i=(0,s.EW)((()=>r.value?[...e.gigs].sort(((e,t)=>{let s=e[r.value]?.[0]?.name||"",i=t[r.value]?.[0]?.name||"";return"date"===r.value&&(s=e.date,i=t.date),"asc"===n.value?s.localeCompare(i):i.localeCompare(s)})):e.gigs)),o=(e,t)=>{r.value=e,n.value=t},l=e=>{t("apply-filter",e)};return{sortedGigs:i,sort:o,applyFilter:l}}};const N=(0,f.A)(x,[["render",K],["__scopeId","data-v-a36a3986"]]);var $=N;const T={class:"modal-content"},V=["src"];function Q(e,t,r,i,o,l){return(0,s.uX)(),(0,s.CE)("div",{class:"modal-backdrop",onClick:t[1]||(t[1]=(0,n.D$)(((...e)=>l.close&&l.close(...e)),["self"]))},[(0,s.Lk)("div",T,[(0,s.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>l.close&&l.close(...e))},"×"),(0,s.Lk)("img",{src:r.gig.image_lg,alt:"Gig Image"},null,8,V)])])}var P={name:"GigModal",props:{gig:{type:Object,required:!0}},methods:{close(){this.$emit("close")}}};const Y=(0,f.A)(P,[["render",Q],["__scopeId","data-v-1563efa6"]]);var Z=Y,z=r(6628),H={__name:"SpinnerComponent",setup(e){return(e,t)=>((0,s.uX)(),(0,s.Wv)((0,u.R1)(z.M),{"animation-duration":2e3,size:65,color:"#ff1d5e"}))}};const J=H;var U=J,ee={name:"App",components:{FiltersComponent:k,BreadcrumbsComponent:X,MenusComponent:j,GigList:$,ModalComponent:Z,Spinner:U},setup(){const e=(0,c.lq)(),t=(0,c.rd)(),r=(0,u.KR)([]),n=(0,u.KR)({artist:null,venue:null,gigtype:null,date:null}),i=(0,u.KR)(null),o=(0,u.KR)(!1),l=(0,u.KR)([]),a=(0,u.KR)([]),g=(0,u.KR)([]),p=Array.from({length:20},((e,t)=>`Item ${t+1}`)),v=(0,s.EW)((()=>{let e=r.value;for(const[t,r]of Object.entries(n.value))r&&(e=e.filter((e=>"date"===t?e.date.startsWith(r):!!Array.isArray(e[t])&&e[t].some((e=>e.name===r)))));return e})),f=async()=>{o.value=!0;try{const e=await d.A.get("https://jasonbstanding.com/wp-json/jbs/v2/tickets");r.value=e.data,m(),k()}catch(e){console.error("Error fetching gigs data:",e)}finally{o.value=!1}},m=()=>{r.value.forEach((e=>{if(e.artist&&(l.value[e.artist[0].name]=(l.value[e.artist[0].name]||0)+1),e.venue&&(a.value[e.venue[0].name]=(a.value[e.venue[0].name]||0)+1),e.date){const t=e.date.split("-")[0];g.value[t]=(g.value[t]||0)+1}}))},k=()=>{const{artist:t,venue:r,gigtype:s,date:i}=e.query;n.value.artist=t||null,n.value.venue=r||null,n.value.gigtype=s||null,n.value.date=i||null},y=()=>{const e={...n.value};Object.keys(e).forEach((t=>{e[t]||delete e[t]})),t.push({query:e})};(0,s.wB)((()=>e.query),k,{immediate:!0}),(0,s.sV)(f);const C=()=>{n.value={artist:null,venue:null,gigtype:null,date:null},y()},b=e=>{n.value[e]=null,y()},h=e=>{n.value[e.type]=e.value,y()},_=e=>{i.value=e};return{gigs:r,filters:n,filteredGigs:v,selectedGig:i,loading:o,clearAllFilters:C,removeFilter:b,applyFilter:h,selectGig:_,items:p,artistCounts:l,venueCounts:a,yearCounts:g}}};const te=(0,f.A)(ee,[["render",a]]);var re=te;const ne=[{path:"/",name:"GigList",component:$}],se=(0,c.aE)({history:(0,c.LA)("/"),routes:ne});var ie=se,oe=r(758);(0,n.Ef)(re).use(ie).use(oe.Ay,{config:{id:"G-7KV1ZJGKK1"}}).mount("#app")}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.m=e,function(){var e=[];r.O=function(t,n,s,i){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],i=e[c][2];for(var l=!0,a=0;a<n.length;a++)(!1&i||o>=i)&&Object.keys(r.O).every((function(e){return r.O[e](n[a])}))?n.splice(a--,1):(l=!1,i<o&&(o=i));if(l){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,s,i]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,i,o=n[0],l=n[1],a=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(a)var c=a(r)}for(t&&t(n);u<o.length;u++)i=o[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(c)},n=self["webpackChunkticket_thing"]=self["webpackChunkticket_thing"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],(function(){return r(4534)}));n=r.O(n)})();
//# sourceMappingURL=app.7974fb43.js.map