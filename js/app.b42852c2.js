(function(){"use strict";var e={3116:function(e,t,r){var n=r(5130),s=r(6768);const i={id:"app"},o={key:0,class:"spinner-container"},l={key:1};function a(e,t,r,n,a,u){const c=(0,s.g2)("Spinner"),d=(0,s.g2)("MenusComponent"),g=(0,s.g2)("FiltersComponent"),p=(0,s.g2)("BreadcrumbsComponent"),f=(0,s.g2)("GigList"),v=(0,s.g2)("ModalComponent");return(0,s.uX)(),(0,s.CE)("div",i,[a.loading?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(c)])):((0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("header",null,[(0,s.bF)(d,{artists:a.artistCounts,venues:a.venueCounts,years:a.yearCounts,onFilter:u.applyFilter},null,8,["artists","venues","years","onFilter"]),(0,s.bF)(g,{filters:a.filters,onClearAll:u.clearAllFilters},null,8,["filters","onClearAll"]),(0,s.bF)(p,{filters:a.filters,onRemoveFilter:u.removeFilter},null,8,["filters","onRemoveFilter"])]),(0,s.bF)(f,{gigs:u.filteredGigs,onSelectGig:u.selectGig,onApplyFilter:u.applyFilter},null,8,["gigs","onSelectGig","onApplyFilter"]),a.selectedGig?((0,s.uX)(),(0,s.Wv)(v,{key:0,gig:a.selectedGig,onClose:t[0]||(t[0]=e=>a.selectedGig=null)},null,8,["gig"])):(0,s.Q3)("",!0)]))])}var u=r(8355);const c={class:"filters"};function d(e,t,r,n,i,o){return(0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("clear-all"))},"Clear All")])}var g={name:"FiltersComponent",props:{filters:Object}},p=r(1241);const f=(0,p.A)(g,[["render",d],["__scopeId","data-v-75a636ae"]]);var v=f,m=r(4232);function k(e,t,r,n,i,o){const l=(0,s.g2)("CDropdownToggle"),a=(0,s.g2)("CDropdownItem"),u=(0,s.g2)("CDropdownMenu"),c=(0,s.g2)("CDropdown");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("Artists")])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.sortedArtists,((e,t)=>((0,s.uX)(),(0,s.Wv)(a,{key:t,onClick:e=>o.filterBy("artist",t)},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)(t)+": "+(0,m.v_)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("Venues")])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.sortedVenues,((e,t)=>((0,s.uX)(),(0,s.Wv)(a,{key:t,onClick:e=>o.filterBy("venue",t)},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)(t)+": "+(0,m.v_)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("Years")])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.sortedYears,((e,t)=>((0,s.uX)(),(0,s.Wv)(a,{key:t,onClick:e=>o.filterBy("date",t)},{default:(0,s.k6)((()=>[(0,s.eW)((0,m.v_)(t)+": "+(0,m.v_)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("Sort Lists")])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.bF)(a,{onClick:t[0]||(t[0]=e=>o.setSort("asc"))},{default:(0,s.k6)((()=>[(0,s.eW)("A to Z")])),_:1}),(0,s.bF)(a,{onClick:t[1]||(t[1]=e=>o.setSort("desc"))},{default:(0,s.k6)((()=>[(0,s.eW)("Z to A")])),_:1}),(0,s.bF)(a,{onClick:t[2]||(t[2]=e=>o.setSort("freq"))},{default:(0,s.k6)((()=>[(0,s.eW)("Frequency desc.")])),_:1})])),_:1})])),_:1})],64)}var C=r(7694),h={name:"MenusComponent",components:{CDropdown:C.ji,CDropdownItem:C.kd,CDropdownToggle:C.VH,CDropdownMenu:C.QR},props:{artists:Object,venues:Object,years:Object},data(){return{sortName:"freq"}},computed:{sortedArtists(){let e={};return e="asc"==this.sortName||"desc"==this.sortName?this.asort(this.artists,this.sortName):this.sort2d(this.artists),e},sortedVenues(){let e={};return e="asc"==this.sortName||"desc"==this.sortName?this.asort(this.venues,this.sortName):this.sort2d(this.venues),e},sortedYears(){let e={};return e="asc"==this.sortName||"desc"==this.sortName?this.asort(this.years,this.sortName):this.sort2d(this.years),e}},methods:{filterBy(e,t){this.$emit("filter",{type:e,value:t})},setSort(e){this.sortName="asc"==e||"desc"==e?e:"freq"},sort2d(e){const t=Object.entries(e);return t.sort((([e,t],[r,n])=>t===n?e.localeCompare(r):n-t)),Object.fromEntries(t)},asort(e,t){const r=Object.entries(e);return r.sort((([e],[t])=>e.localeCompare(t))),"desc"==t&&r.sort().reverse(),Object.fromEntries(r)}}};const y=(0,p.A)(h,[["render",k]]);var b=y;const _={class:"breadcrumbs"},F=["onClick"];function G(e,t,r,n,i,o){return(0,s.uX)(),(0,s.CE)("div",_,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.activeFilters,((t,r)=>((0,s.uX)(),(0,s.CE)("span",{key:r},[(0,s.eW)((0,m.v_)(t.key)+": "+(0,m.v_)(t.value)+" ",1),(0,s.Lk)("button",{onClick:r=>e.$emit("remove-filter",t.key)},"x",8,F)])))),128))])}var A={name:"BreadcrumbsComponent",props:{filters:{type:Object,required:!0}},computed:{activeFilters(){return Object.entries(this.filters).filter((([,e])=>e)).map((([e,t])=>({key:e,value:t})))}}};const O=(0,p.A)(A,[["render",G],["__scopeId","data-v-87f1300a"]]);var j=O;const E={class:"sort-options"},L={class:"grid-container"};function X(e,t,r,n,i,o){const l=(0,s.g2)("GigBox");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",E,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>n.sort("artist","asc"))},"Sort Artist Asc"),(0,s.Lk)("button",{onClick:t[1]||(t[1]=e=>n.sort("artist","desc"))},"Sort Artist Desc"),(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>n.sort("date","asc"))},"Sort Date Asc"),(0,s.Lk)("button",{onClick:t[3]||(t[3]=e=>n.sort("date","desc"))},"Sort Date Desc")]),(0,s.Lk)("div",L,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.sortedGigs,(r=>((0,s.uX)(),(0,s.Wv)(l,{key:r.id,gig:r,onFilter:n.applyFilter,onSelectGig:t[4]||(t[4]=t=>e.$emit("select-gig",t))},null,8,["gig","onFilter"])))),128))])])}var S=r(144);const w={class:"gig-box"},W=["src"];function B(e,t,r,n,i,o){return(0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",{class:"gigtype",onClick:t[0]||(t[0]=e=>o.filterBy("gigtype"))},(0,m.v_)(r.gig.gigtype[0]?.name),1),(0,s.Lk)("img",{src:r.gig.image_sml,alt:"Gig Image",onClick:t[1]||(t[1]=e=>o.selectGig(r.gig))},null,8,W),(0,s.Lk)("h2",{onClick:t[2]||(t[2]=e=>o.selectGig(r.gig))},(0,m.v_)(r.gig.title),1),(0,s.Lk)("p",{onClick:t[3]||(t[3]=e=>o.filterBy("date"))},(0,m.v_)(r.gig.date),1),(0,s.Lk)("p",null,(0,m.v_)(r.gig.price>0?`£${r.gig.price}`:"Free"),1),r.gig.artist?((0,s.uX)(),(0,s.CE)("p",{key:0,onClick:t[4]||(t[4]=e=>o.filterBy("artist")),class:"artist"},(0,m.v_)(r.gig.artist[0]?.name),1)):(0,s.Q3)("",!0),r.gig.venue?((0,s.uX)(),(0,s.CE)("p",{key:1,onClick:t[5]||(t[5]=e=>o.filterBy("venue"))},(0,m.v_)(r.gig.venue[0]?.name),1)):(0,s.Q3)("",!0)])}var D={name:"GigBox",props:{gig:{type:Object,required:!0}},methods:{showDetails(){this.$emit("click")},filterBy(e){const t="date"===e?this.gig.date.split("-")[0]:this.gig[e][0]?.name;this.$emit("filter",{type:e,value:t})},selectGig(e){this.$emit("select-gig",e)}}};const I=(0,p.A)(D,[["render",B],["__scopeId","data-v-27f8479c"]]);var M=I,K={name:"GigList",components:{GigBox:M},props:{gigs:{type:Array,required:!0}},setup(e,{emit:t}){const r=(0,S.KR)(null),n=(0,S.KR)(null),i=(0,s.EW)((()=>r.value?[...e.gigs].sort(((e,t)=>{let s=e[r.value]?.[0]?.name||"",i=t[r.value]?.[0]?.name||"";return"date"===r.value&&(s=e.date,i=t.date),"asc"===n.value?s.localeCompare(i):i.localeCompare(s)})):e.gigs)),o=(e,t)=>{r.value=e,n.value=t},l=e=>{t("apply-filter",e)};return{sortedGigs:i,sort:o,applyFilter:l}}};const N=(0,p.A)(K,[["render",X],["__scopeId","data-v-8e28b406"]]);var x=N;const $={class:"modal-content"},q=["src"];function R(e,t,r,i,o,l){return(0,s.uX)(),(0,s.CE)("div",{class:"modal-backdrop",onClick:t[1]||(t[1]=(0,n.D$)(((...e)=>l.close&&l.close(...e)),["self"]))},[(0,s.Lk)("div",$,[(0,s.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>l.close&&l.close(...e))},"×"),(0,s.Lk)("img",{src:r.gig.image_lg,alt:"Gig Image"},null,8,q)])])}var T={name:"GigModal",props:{gig:{type:Object,required:!0}},methods:{close(){this.$emit("close")}}};const V=(0,p.A)(T,[["render",R],["__scopeId","data-v-1563efa6"]]);var P=V,Q=r(6628),Y={__name:"SpinnerComponent",setup(e){return(e,t)=>((0,s.uX)(),(0,s.Wv)((0,S.R1)(Q.M),{"animation-duration":2e3,size:65,color:"#ff1d5e"}))}};const Z=Y;var z=Z,H={name:"App",components:{FiltersComponent:v,BreadcrumbsComponent:j,MenusComponent:b,GigList:x,ModalComponent:P,Spinner:z},data(){return{gigs:[],filters:{artist:null,venue:null,gigtype:null,date:null},selectedGig:null,loading:!1,artistCounts:{},venueCounts:{},yearCounts:{}}},computed:{filteredGigs(){let e=this.gigs;for(const[t,r]of Object.entries(this.filters))r&&(e=e.filter((e=>"date"===t?e.date.startsWith(r):!!Array.isArray(e[t])&&e[t].some((e=>e.name===r)))));return e}},methods:{async fetchGigs(){this.loading=!0;try{const e=await u.A.get("https://jasonbstanding.com/wp-json/jbs/v2/tickets");this.gigs=e.data,this.processCounts()}catch(e){console.error("Error fetching gigs data:",e)}finally{this.loading=!1}},processCounts(){const e={},t={},r={};this.gigs.forEach((n=>{if(n.artist&&(e[n.artist[0].name]=(e[n.artist[0].name]||0)+1),n.venue&&(t[n.venue[0].name]=(t[n.venue[0].name]||0)+1),n.date){const e=n.date.split("-")[0];r[e]=(r[e]||0)+1}})),this.artistCounts=e,this.venueCounts=t,this.yearCounts=r},clearAllFilters(){this.filters={artist:null,venue:null,gigtype:null,date:null}},removeFilter(e){this.filters[e]=null},applyFilter(e){this.filters[e.type]=e.value},selectGig(e){this.selectedGig=e}},created(){this.fetchGigs()}};const J=(0,p.A)(H,[["render",a]]);var U=J,ee=r(1387);const te=[{path:"/",name:"GigList",component:x}],re=(0,ee.aE)({history:(0,ee.LA)("/"),routes:te});var ne=re,se=r(758);(0,n.Ef)(U).use(ne).use(se.Ay,{config:{id:"G-7KV1ZJGKK1"}}).mount("#app")}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.m=e,function(){var e=[];r.O=function(t,n,s,i){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],i=e[c][2];for(var l=!0,a=0;a<n.length;a++)(!1&i||o>=i)&&Object.keys(r.O).every((function(e){return r.O[e](n[a])}))?n.splice(a--,1):(l=!1,i<o&&(o=i));if(l){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,s,i]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,i,o=n[0],l=n[1],a=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(a)var c=a(r)}for(t&&t(n);u<o.length;u++)i=o[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(c)},n=self["webpackChunkticket_thing"]=self["webpackChunkticket_thing"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],(function(){return r(3116)}));n=r.O(n)})();
//# sourceMappingURL=app.b42852c2.js.map